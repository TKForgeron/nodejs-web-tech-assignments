<!DOCTYPE html>
<html lang="en">
<head>
    <link rel="stylesheet" type="text/css" href="../public/styles/style.css">
    <link rel="icon" href="../public/images/uulogo.png" type="image/png">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial scale=1">
    <meta name="description" content="5-question quiz about JavaScript">
    <meta name="keywords" content="JavaScript, questions, test yourself">
    <title>JavaScript - Assessment</title>
</head>
<body>
<header class="header">
    <a href="https://www.javascript.com/" target="_blank" title="Go to JavaScript.com"><img src="../public/images/javascriptlogo.png" alt="JavaScript logo" class="header__img header__img--left"></a>
    <a href="https://www.uu.nl/" target="_blank" title="Go to uu.nl"><img src="../public/images/uulogo.png" alt="Utrecht Univesity logo" class="header__img header__img--right"></a>
    <a href="../public/index.html"><h1>JavaScript</h1></a>
</header>
<nav class="nav">
</nav>
<!--<main>-->
    <table id="table">
        <thead>
        <tr>
            <th>ID</th>
            <th>Title</th>
            <th>Image</th>
            <th>Question</th>
            <th>Explanation</th>
            <th>Answer</th>
            <th>Other options</th>
            <th>Reference</th>
        </tr>
        </thead>
        <tbody>
        <!-- To be filled by AJAX -->
        </tbody>
    </table>
<!--</main>-->
<footer>
</footer>


<script type="text/javascript" src="../public/js/questions.js"></script>
<script type="text/javascript">
    // Loads quiz form JSON file and puts it in the classes made for assignment 2 (Hereafter, the rest of assignment 2 should take over)
    function loadQuiz() {
        const request = new XMLHttpRequest();

        request.onreadystatechange = function() {
            if (this.readyState === 4 && this.status === 200) {
                const quiz = JSON.parse(this.responseText);
                populate(quiz);
            }
        };

        request.open("get", "data/quiz.json");
        request.send();
    }
    var array=[];
    function populate(json) {
        json.forEach((row) => {
            var q;
            var mq;
            if(!row.otherOptions) {
                q = new Question(row.id, row.title, row.image, row.question, row.explanation, row.answer, row.reference);
                array.push(q);
            }
            if (row.otherOptions){
                // otherOptions in multiple choice questions are called options (keep this in mind)!!!
                mq = new MultipleChoice(row.id, row.title, row.image, row.question, row.explanation, row.answer, row.otherOptions, row.reference);
                array.push(mq);
            }
        });
        //console.log(array);
        populateTable(array);
    }

    // Temporary code that puts the questions in a table
    const tableBody = document.querySelector("#table > tbody");
    function populateTable(json){
        // Clears out existing table data
        while (tableBody.firstChild){
            tableBody.removeChild(tableBody.firstChild);
        }

        //console.log(json);

        // Populate table
         json.forEach((row) =>{
             const tr = document.createElement("tr");

             const td1 = document.createElement("td");
             td1.textContent = row.id;
             tr.appendChild(td1);

             const td2 = document.createElement("td");
             td2.textContent = row.title;
             tr.appendChild(td2);

             const td3 = document.createElement("td");
             td3.textContent = row.image;
             tr.appendChild(td3);

             const td4 = document.createElement("td");
             td4.textContent = row.question;
             tr.appendChild(td4);

             const td5 = document.createElement("td");
             td5.textContent = row.explanation;
             tr.appendChild(td5);

             const td6 = document.createElement("td");
             td6.textContent = row.answer;
             tr.appendChild(td6);

             const td7 = document.createElement("td");
             td7.textContent = row.options;
             tr.appendChild(td7);

             const td8 = document.createElement("td");
             td8.textContent = row.reference;
             tr.appendChild(td8);

             //console.log(row.id);
             tableBody.appendChild(tr);

         });
    }

    document.addEventListener("DOMContentLoaded", () => {loadQuiz();});

</script>
<script src="../public/js/selection.js"></script>

</body>
</html>