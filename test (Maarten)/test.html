<!DOCTYPE html>
<html lang="en">
<head>
    <link rel="stylesheet" type="text/css" href="../public/styles/style.css">
    <meta charset="UTF-8">
    <title>Populate HTML using AJAX</title>
</head>
<body>
    <h1>Populate HTML using AJAX</h1>
    <p>the following will be filled using AJAX.</p>
<table id="rankings-table">
    <thead>
        <tr>
            <th>Ranking</th>
            <th>Full Name</th>
            <th>Points</th>
        </tr>
    </thead>
    <tbody>
        <!-- To be filled by AJAX -->
    </tbody>
</table>

<script type="text/javascript">
    const rankingsBody = document.querySelector("#rankings-table > tbody");

    function loadRankings() {
        const request = new XMLHttpRequest();

        request.open("get", "data/rankings.json");
        request.onload = () => {
            try {
                const json = JSON.parse(request.responseText);
                populateRankings(json);
            } catch (e){
                console.warn("Could not load rankings! :(");
            }
        }

        request.send();
    }

    function populateRankings(json){
        // Clears out existing table data
        while (rankingsBody.firstChild){
            rankingsBody.removeChild(rankingsBody.firstChild);
        }

        // Populate table
        json.forEach((row) =>{
            const tr = document.createElement("tr");


            row.forEach((cell) =>{
               const td = document.createElement("td");
               td.textContent = cell;
               tr.appendChild(td);
            });

            rankingsBody.appendChild(tr);

        });
    }

    document.addEventListener("DOMContentLoaded", () => {loadRankings();});

</script>

</body>
</html>